<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <canvas id="canvas"></canvas>
    <script type="text/javascript">

var cnv = document.getElementById('canvas');
var ctx = cnv.getContext('2d');
var width = 500, height = 400;

cnv.width = width;
cnv.height = height;
cnv.style.background = 'black';

ctx.fillStyle = 'yellow';
ctx.strokeStyle = 'white';
ctx.lineWidth = 1;

var clear = function() {
  ctx.clearRect(0,0,width, height);
}
var fillRect = function (x, y, w, h) {
  ctx.fillRect(x, y, w, h);
}
var mouse = {
  x : 0,
  y : 0,

  speedX : 0,
  speedY : 0,

  oldX: 0,
  oldY: 0,

  update: function() {
    this.speedX = Math.abs(this.x - this.oldX);
    this.speedY = Math.abs(this.y - this.oldY);
    this.oldX = this.x;
    this.oldY = this.y;
  }

};

cnv.onmousemove = function(e) {
  mouse.x = e.pageX - 10; // padding canvas от начала экрана
  mouse.y = e.pageY - 10; // padding canvas от начала экрана
};

// имитационный игровой цикл
setInterval(function(){
  clear();
  mouse.update();
  fillRect(10, 10, 50 + mouse.speedX, 25);  // рисуем прямоугольники для отображения скорости
  fillRect(10, 40, 50 + mouse.speedY, 25); // рисуем прямоугольники для отображения скорости

}, 1000/60);


    </script>
  </body>
</html>
